<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Crear imágenes con Dockerfile | Curso de Docker ADC</title>
    <meta name="description" content="Material de apoyo para el curso">
    <meta name="og:image" content="https://imagesadc.s3.amazonaws.com/eventos/VueLaptop.png">
    
    <link rel="preload" href="/docker-fundamentals/assets/css/0.styles.136b7f2c.css" as="style"><link rel="preload" href="/docker-fundamentals/assets/js/app.d044533e.js" as="script"><link rel="preload" href="/docker-fundamentals/assets/js/2.7ac2fb29.js" as="script"><link rel="preload" href="/docker-fundamentals/assets/js/11.3e635e87.js" as="script"><link rel="prefetch" href="/docker-fundamentals/assets/js/10.aa26e085.js"><link rel="prefetch" href="/docker-fundamentals/assets/js/12.78013e49.js"><link rel="prefetch" href="/docker-fundamentals/assets/js/13.6a1a75a7.js"><link rel="prefetch" href="/docker-fundamentals/assets/js/3.0f3bf67f.js"><link rel="prefetch" href="/docker-fundamentals/assets/js/4.2a013501.js"><link rel="prefetch" href="/docker-fundamentals/assets/js/5.2f4ce101.js"><link rel="prefetch" href="/docker-fundamentals/assets/js/6.169cc363.js"><link rel="prefetch" href="/docker-fundamentals/assets/js/7.e84773c7.js"><link rel="prefetch" href="/docker-fundamentals/assets/js/8.9db9509e.js"><link rel="prefetch" href="/docker-fundamentals/assets/js/9.dd443e46.js">
    <link rel="stylesheet" href="/docker-fundamentals/assets/css/0.styles.136b7f2c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docker-fundamentals/" class="home-link router-link-active"><!----> <span class="site-name">Curso de Docker ADC</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docker-fundamentals/basics/" class="nav-link">Basics</a></div><div class="nav-item"><a href="/docker-fundamentals/dockerfile/" class="nav-link router-link-exact-active router-link-active">Dockerfile</a></div><div class="nav-item"><a href="/docker-fundamentals/docker-compose/" class="nav-link">Docker Compose</a></div><div class="nav-item"><a href="/docker-fundamentals/volumes/" class="nav-link">Volumenes</a></div><div class="nav-item"><a href="https://github.com/Ascodecodigo/docker-fundamentals" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://ascodecodigo.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ADC
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docker-fundamentals/basics/" class="nav-link">Basics</a></div><div class="nav-item"><a href="/docker-fundamentals/dockerfile/" class="nav-link router-link-exact-active router-link-active">Dockerfile</a></div><div class="nav-item"><a href="/docker-fundamentals/docker-compose/" class="nav-link">Docker Compose</a></div><div class="nav-item"><a href="/docker-fundamentals/volumes/" class="nav-link">Volumenes</a></div><div class="nav-item"><a href="https://github.com/Ascodecodigo/docker-fundamentals" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://ascodecodigo.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ADC
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Dockerfile</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docker-fundamentals/dockerfile/" class="active sidebar-link">Crear imágenes con Dockerfile</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker-fundamentals/dockerfile/#ejemplo" class="sidebar-link">Ejemplo</a></li><li class="sidebar-sub-header"><a href="/docker-fundamentals/dockerfile/#construir-imagen" class="sidebar-link">Construir imagen</a></li><li class="sidebar-sub-header"><a href="/docker-fundamentals/dockerfile/#listar-imagenes" class="sidebar-link">listar imagenes</a></li><li class="sidebar-sub-header"><a href="/docker-fundamentals/dockerfile/#instalar-el-dockerfile" class="sidebar-link">Instalar el dockerFile</a></li><li class="sidebar-sub-header"><a href="/docker-fundamentals/dockerfile/#run" class="sidebar-link">Run</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="crear-imagenes-con-dockerfile"><a href="#crear-imagenes-con-dockerfile" class="header-anchor">#</a> Crear imágenes con Dockerfile</h1> <p>Cuando terminamos un proyecto y lo queremos enviar a producción, que mejor manera que dockerizar el proyecto</p> <p>Para hacer esto es muy simple.
En el proyecto a trabajar, hay que crear un archivo llamado <strong>Dockerfile</strong>, para este ejemplo estaremos dockerizando un proyecto hecho en node js.
En el Dockerfile agregamos el siguiente código:</p> <h2 id="ejemplo"><a href="#ejemplo" class="header-anchor">#</a> <code>Ejemplo</code></h2> <blockquote><p>Dockerfile</p></blockquote> <div class="language-Dockerfile extra-class"><pre class="language-dockerfile"><code><span class="token keyword">from</span> node<span class="token punctuation">:</span>10.13<span class="token punctuation">-</span>alpine
<span class="token keyword">RUN</span> mkdir app
<span class="token keyword">WORKDIR</span> /app
<span class="token keyword">COPY</span> . .
<span class="token keyword">ENV</span> PORT=3000
<span class="token keyword">RUN</span> npm install
<span class="token keyword">EXPOSE</span> $PORT
<span class="token keyword">CMD</span> node app.js
</code></pre></div><ul><li><p>En la linea uno <strong>from node:10.13-alpine</strong> vamos a seleccionar una imagen, para este caso como es node js, estoy eligiendo la version de node 10 pero con la versiona mas liviana (alpine)</p></li> <li><p>En la segunda linea tenemos un comando llamado <strong>RUN</strong>, que me va a permitir ejecutar comandos en consola, en este caso <strong>mkdir app</strong> la cual crea una carpeta.</p></li> <li><p>Despues le establecemos que el workspase se va a posicionar en <strong>/app</strong>.</p></li> <li><p>Copiamos toda la informacion donde nos encontramos al workspace seleccionado <strong>COPY ..</strong></p></li> <li><p>Creamos un enviroment para nuestro sistema ENV</p></li> <li><p>Ejecutamos un comando para instalar dependencias</p></li> <li><p>Indicamos que puerto vamos a exponer, para este caso hacemor referencia al enviroment <strong>PORT</strong></p></li> <li><p>Ejecutamos un comando, donde le indicamos que ejecute la aplicacion <strong>node app.js</strong></p></li></ul> <h2 id="construir-imagen"><a href="#construir-imagen" class="header-anchor">#</a> Construir imagen</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ docker build -t <span class="token string">&quot;nombre:tag&quot;</span> <span class="token builtin class-name">.</span>
</code></pre></div><h2 id="listar-imagenes"><a href="#listar-imagenes" class="header-anchor">#</a> listar imagenes</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ docker images
</code></pre></div><h2 id="instalar-el-dockerfile"><a href="#instalar-el-dockerfile" class="header-anchor">#</a> Instalar el dockerFile</h2> <div class="language- extra-class"><pre class="language-text"><code>docker run -dti --name &quot;name-container&quot; -p 3000:3000 &quot;name-image:tag&quot;
</code></pre></div><h2 id="run"><a href="#run" class="header-anchor">#</a> Run</h2> <p><code>-P</code> elige un puerto aletorio en mi maquina local</p> <p><code>-d</code> ejecuta como demonio</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ docker run -d -P app
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/docker-fundamentals/assets/js/app.d044533e.js" defer></script><script src="/docker-fundamentals/assets/js/2.7ac2fb29.js" defer></script><script src="/docker-fundamentals/assets/js/11.3e635e87.js" defer></script>
  </body>
</html>
