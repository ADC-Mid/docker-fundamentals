(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{214:function(a,s,t){"use strict";t.r(s);var e=t(0),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[a._v("#")]),a._v(" Docker Compose")]),a._v(" "),t("h2",{attrs:{id:"docker-compose-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-file"}},[a._v("#")]),a._v(" Docker compose file")]),a._v(" "),t("blockquote",[t("p",[a._v("docker-compose.yml")])]),a._v(" "),t("div",{staticClass:"language-yml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("web")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" .\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("links")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" redis\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"80:5000"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("redis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" redis\n\n")])])]),t("h2",{attrs:{id:"format-name"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#format-name"}},[a._v("#")]),a._v(" Format name")]),a._v(" "),t("p",[t("code",[a._v("<project>_<service>_<number>")])]),a._v(" "),t("h2",{attrs:{id:"commands"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#commands"}},[a._v("#")]),a._v(" Commands")]),a._v(" "),t("h3",{attrs:{id:"build-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#build-image"}},[a._v("#")]),a._v(" Build image")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker-compose build\n")])])]),t("h3",{attrs:{id:"container"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#container"}},[a._v("#")]),a._v(" Container")]),a._v(" "),t("ul",[t("li",[a._v("run")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker-compose up\n")])])]),t("ul",[t("li",[t("code",[a._v("-d")]),a._v(" refresh containers due to changes")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker-compose up -d\n")])])]),t("ul",[t("li",[a._v("logs")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker-compose logs "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("SERVICE"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("ul",[t("li",[a._v("stop all containers")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker-compose stop\n")])])]),t("ul",[t("li",[a._v("remove stoped containers")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker-compose "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("SERVICE"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("ul",[t("li",[a._v("remove all containers")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker-compose "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v("\n")])])]),t("ul",[t("li",[a._v("stop and remove")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker-compose down\n")])])]),t("h3",{attrs:{id:"rename-docker-compose-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rename-docker-compose-file"}},[a._v("#")]),a._v(" Rename "),t("code",[a._v("docker-compose")]),a._v(" file")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker-compose -f file_name.yml\n")])])]),t("h2",{attrs:{id:"scale"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scale"}},[a._v("#")]),a._v(" Scale")]),a._v(" "),t("h3",{attrs:{id:"load-balancer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#load-balancer"}},[a._v("#")]),a._v(" Load balancer")]),a._v(" "),t("blockquote",[t("p",[a._v("docker-compose.yml")])]),a._v(" "),t("div",{staticClass:"language-yml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("web")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" .\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("links")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" redis\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"80:5000"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("redis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" redis\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("lb")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" tutum/haproxy\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("links")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" \n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" web\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"80:80"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" BACKEND_PORT=5000\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" BALANCE=roundrobin\n")])])]),t("h3",{attrs:{id:"run"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run"}},[a._v("#")]),a._v(" Run")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker-compose scale "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("web")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v("\n")])])]),t("h3",{attrs:{id:"recreate-without-dependencies"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#recreate-without-dependencies"}},[a._v("#")]),a._v(" Recreate without dependencies")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker-compose build --force-recreate --no-deps lb \n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);